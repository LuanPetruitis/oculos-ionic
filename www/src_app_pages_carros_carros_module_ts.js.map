{"version":3,"file":"src_app_pages_carros_carros_module_ts.js","mappings":"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","sources":["./src/app/pages/carros/carros-routing.module.ts","./src/app/pages/carros/carros.module.ts","./src/app/pages/carros/novo-carro/novo-carro.page.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { novoCarroPage } from './novo-carro/novo-carro.page';\n\nconst routes: Routes = [\n  {\n    path: '', children: [\n      {\n        path: 'cadastro/:id',\n        component: novoCarroPage\n      },\n    ]\n  },\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [\n    novoCarroPage\n  ]\n})\nexport class OculosRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { OculosRoutingModule } from './carros-routing.module';\n\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    OculosRoutingModule\n  ]\n})\nexport class OculosModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { AngularFireStorage } from '@angular/fire/compat/storage';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavController } from '@ionic/angular';\nimport { AnyRecordWithTtl } from 'dns';\nimport { Carroservice } from '../service/carro-service';\n\n@Component({\n  selector: 'app-novo-carro',\n  templateUrl: './novo-carro.page.html'\n  // styleUrls: ['./novoCarro.page.scss'],\n})\nexport class novoCarroPage implements OnInit {\n  carrosForm: FormGroup;\n\n  selectedFile: any;\n  id: any;\n  imageUrl: any;\n  criando: any;\n\n  constructor(\n    private builder: FormBuilder,\n    private nav: NavController,\n    private carro: Carroservice,\n    private actRoute: ActivatedRoute,\n    private storage: AngularFireStorage\n  ) {\n    this.criando = false\n    this.id = this.actRoute.snapshot.paramMap.get('id');\n    this.carro.pegaCarro(this.id).subscribe(res => {\n      console.log(res[0])\n      if (res[0]){ \n        this.carrosForm.patchValue({\n          nome: res[0].nome, \n          marca: res[0].marca,\n          descricao: res[0].descricao,\n          quilometragem: res[0].quilometragem,\n          valor: res[0].valor\n        });\n        this.imageUrl = res[0].imageUrl\n      } else {\n        this.carrosForm.patchValue({\n          nome: '', \n          marca: '',\n          descricao: '',\n          quilometragem: 0,\n          valor: 0\n        });\n        this.imageUrl = ''\n      }\n    })\n  }\n\n  ngOnInit() {\n    this.initForm();\n  }\n\n  private initForm() {\n    this.carrosForm = this.builder.group({\n      nome: ['', [Validators.required]],\n      marca: ['', [Validators.required]],\n      descricao: ['', [Validators.required]],\n      quilometragem: ['', [Validators.required]],\n      valor: ['', [Validators.required]],\n    })\n  }\n\n  /**\n   * Salva a nova carro no Firebase\n   */\n  async registraCarro() {\n    this.criando = true;\n    const carro = this.carrosForm.value;\n    console.log(this.selectedFile)\n    \n    if (this.id != 'new') {\n      carro.id = this.id\n    }\n\n    var resquest_carro = this.carro.registraCarro(carro)\n  \n    if (this.selectedFile) {\n      this.imageUrl = await this.uploadFile(resquest_carro.id, this.selectedFile)\n    }\n\n    this.carro.update(resquest_carro.id, {\n      imageUrl: this.imageUrl || null\n    })\n\n    \n    this.criando = true;\n    this.nav.navigateForward('home')\n  }\n\n  chooseFile (event) {\n    this.selectedFile = event.target.files\n  }\n\n  async uploadFile(id, file): Promise<any> {\n    if(file && file.length) {\n      try {\n        const task = await this.storage.ref('images').child(id).put(file[0])\n        return this.storage.ref(`images/${id}`).getDownloadURL().toPromise();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}