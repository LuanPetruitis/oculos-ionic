"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1473],{1473:(k,d,r)=>{r.r(d),r.d(d,{OculosModule:()=>q});var Z=r(9808),c=r(4182),u=r(3151),e=r(4433),g=r(655),o=r(6435),h=r(2274),_=r(4586);const T=function(){return["/"]},f=[{path:"",children:[{path:"cadastro/:id",component:(()=>{class l{constructor(a,i,n,m,p){this.builder=a,this.nav=i,this.oculo=n,this.actRoute=m,this.storage=p,this.checkedItems=[],this.criando=!1,this.id=this.actRoute.snapshot.paramMap.get("id"),this.oculo.pegaOculo(this.id).subscribe(t=>{console.log(t[0]),t[0]?(this.oculosForm.patchValue({nome:t[0].nome,descricao:t[0].descricao,modelo:t[0].modelo,condicao:t[0].condicao,material_celulose:t[0].material_celulose,material_metal:t[0].material_metal,material_titanium:t[0].material_titanium,material_aluminio:t[0].material_aluminio,material_aco:t[0].material_aco,material_madeira:t[0].material_madeira,material_injetados:t[0].material_injetados,material_outro:t[0].material_outro}),this.imageUrl=t[0].imageUrl):(this.oculosForm.patchValue({nome:"",descricao:"",modelo:"",condicao:"",material_celulose:!1,material_metal:!1,material_titanium:!1,material_aluminio:!1,material_aco:!1,material_madeira:!1,material_injetados:!1,material_outro:!1}),this.imageUrl="")})}ngOnInit(){this.initForm(),this.oculosForm.setErrors({required:!0})}initForm(){this.oculosForm=this.builder.group({nome:["",[c.kI.required]],descricao:["",[c.kI.required]],modelo:["",[c.kI.required]],condicao:["",[c.kI.required]],material_celulose:[!1],material_metal:[!1],material_titanium:[!1],material_aluminio:[!1],material_aco:[!1],material_madeira:[!1],material_injetados:[!1],material_outro:[!1]})}registraOculo(){return(0,g.mG)(this,void 0,void 0,function*(){this.criando=!0;const a=this.oculosForm.value;console.log(this.selectedFile),"new"!=this.id&&(a.id=this.id),a.materias=this.checkedItems;var i=this.oculo.registraOculo(a);console.log(this.selectedFile),this.selectedFile&&(console.log("==============================="),this.imageUrl=yield this.uploadFile(i.id,this.selectedFile)),console.log(this.imageUrl),this.oculo.update(i.id,{imageUrl:this.imageUrl||null}),this.criando=!1,this.nav.navigateForward("home")})}chooseFile(a){this.selectedFile=a.target.files}uploadFile(a,i){return(0,g.mG)(this,void 0,void 0,function*(){if(i&&i.length)try{return yield this.storage.ref("images").child(a).put(i[0]),this.storage.ref(`images/${a}`).getDownloadURL().toPromise()}catch(n){console.log(n)}})}changeSelection(a){this.checkedItems.includes(a)?this.checkedItems=this.checkedItems.filter(i=>i!=a):this.checkedItems.push(a)}}return l.\u0275fac=function(a){return new(a||l)(o.Y36(c.qu),o.Y36(e.SH),o.Y36(h.y),o.Y36(u.gz),o.Y36(_.Q1))},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-novo-oculos"]],decls:99,vars:5,consts:[["fullscreen","",1,"ion-padding"],[1,"ion-text-start"],["id","crop"],[3,"src"],[3,"formGroup","submit"],["position","floating"],["formControlName","nome","type","text"],["formControlName","descricao","rows","8"],["mode","md"],["interface","action-sheet","placeholder","Selecionar Material","id","select","formControlName","modelo"],["value","Wayfarer"],["value","Coruja"],["value","Aviador"],["value","SemAroAparente"],["value","HastesMadeira"],["value","Contraste"],["value","Outros"],["value","condicao","formControlName","condicao","mode","md"],["slot","start","value","Novo"],["slot","start","value","Usado"],["color","dark","formControlName","material_celulose",3,"click"],["color","dark","formControlName","material_metal",3,"click"],["color","dark","formControlName","material_titanium",3,"click"],["color","dark","formControlName","material_aluminio",3,"click"],["color","dark","formControlName","material_aco",3,"click"],["color","dark","formControlName","material_madeira",3,"click"],["color","dark","formControlName","material_injetados",3,"click"],["color","dark","formControlName","material_outro",3,"click"],["lines","none"],["type","file","name","inputFile","required","",3,"change"],["id","confirm-div"],["color","danger",3,"routerLink"],["id","confirm-icon","name","arrow-back-circle-outline"],["type","submit","color","success",3,"disabled"],["id","confirm-icon","name","checkmark-circle-outline"]],template:function(a,i){1&a&&(o.TgZ(0,"ion-header"),o.TgZ(1,"ion-toolbar"),o.TgZ(2,"ion-title"),o._uU(3,"novoOculo"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(4,"ion-content",0),o.TgZ(5,"ion-card",1),o.TgZ(6,"ion-card-header"),o.TgZ(7,"ion-card-title"),o._uU(8,"Cadastro de \xd3culos"),o.qZA(),o.qZA(),o.TgZ(9,"ion-card-content"),o.TgZ(10,"div",2),o._UZ(11,"img",3),o.qZA(),o.TgZ(12,"form",4),o.NdJ("submit",function(){return i.registraOculo()}),o.TgZ(13,"ion-item"),o.TgZ(14,"ion-label",5),o._uU(15,"Nome"),o.qZA(),o._UZ(16,"ion-input",6),o.qZA(),o.TgZ(17,"ion-item"),o.TgZ(18,"ion-label",5),o._uU(19,"Descri\xe7\xe3o"),o.qZA(),o._UZ(20,"ion-textarea",7),o.qZA(),o.TgZ(21,"ion-list",8),o.TgZ(22,"ion-list-header"),o.TgZ(23,"ion-label"),o._uU(24,"Modelo"),o.qZA(),o.qZA(),o.TgZ(25,"ion-item"),o.TgZ(26,"ion-select",9),o.TgZ(27,"ion-select-option",10),o._uU(28,"Wayfarer"),o.qZA(),o.TgZ(29,"ion-select-option",11),o._uU(30,"Coruja"),o.qZA(),o.TgZ(31,"ion-select-option",12),o._uU(32,"Aviador"),o.qZA(),o.TgZ(33,"ion-select-option",13),o._uU(34,"Sem aro aparente"),o.qZA(),o.TgZ(35,"ion-select-option",14),o._uU(36,"Hastes de madeira"),o.qZA(),o.TgZ(37,"ion-select-option",15),o._uU(38,"Fio contraste"),o.qZA(),o.TgZ(39,"ion-select-option",16),o._uU(40,"Outros"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(41,"ion-list",8),o.TgZ(42,"ion-list-header"),o.TgZ(43,"ion-label"),o._uU(44,"Condi\xe7\xe3o"),o.qZA(),o.qZA(),o.TgZ(45,"ion-radio-group",17),o.TgZ(46,"ion-item"),o.TgZ(47,"ion-label"),o._uU(48,"Novo"),o.qZA(),o._UZ(49,"ion-radio",18),o.qZA(),o.TgZ(50,"ion-item"),o.TgZ(51,"ion-label"),o._uU(52,"Usado"),o.qZA(),o._UZ(53,"ion-radio",19),o.qZA(),o.qZA(),o.qZA(),o.TgZ(54,"ion-list",8),o.TgZ(55,"ion-list-header"),o.TgZ(56,"ion-label"),o._uU(57,"Material de Fabrica\xe7\xe3o"),o.qZA(),o.qZA(),o.TgZ(58,"ion-item"),o.TgZ(59,"ion-label"),o._uU(60," Acetato de celulose "),o.qZA(),o.TgZ(61,"ion-checkbox",20),o.NdJ("click",function(){return i.changeSelection("Celulose")}),o.qZA(),o.qZA(),o.TgZ(62,"ion-item"),o.TgZ(63,"ion-label"),o._uU(64,"Metal"),o.qZA(),o.TgZ(65,"ion-checkbox",21),o.NdJ("click",function(){return i.changeSelection("Metal")}),o.qZA(),o.qZA(),o.TgZ(66,"ion-item"),o.TgZ(67,"ion-label"),o._uU(68,"Titanium"),o.qZA(),o.TgZ(69,"ion-checkbox",22),o.NdJ("click",function(){return i.changeSelection("Titanium")}),o.qZA(),o.qZA(),o.TgZ(70,"ion-item"),o.TgZ(71,"ion-label"),o._uU(72,"Alum\xednio"),o.qZA(),o.TgZ(73,"ion-checkbox",23),o.NdJ("click",function(){return i.changeSelection("Aluminio")}),o.qZA(),o.qZA(),o.TgZ(74,"ion-item"),o.TgZ(75,"ion-label"),o._uU(76,"A\xe7o inoxid\xe1vel"),o.qZA(),o.TgZ(77,"ion-checkbox",24),o.NdJ("click",function(){return i.changeSelection("Aco")}),o.qZA(),o.qZA(),o.TgZ(78,"ion-item"),o.TgZ(79,"ion-label"),o._uU(80,"Madeira"),o.qZA(),o.TgZ(81,"ion-checkbox",25),o.NdJ("click",function(){return i.changeSelection("Madeira")}),o.qZA(),o.qZA(),o.TgZ(82,"ion-item"),o.TgZ(83,"ion-label"),o._uU(84,"Injetados"),o.qZA(),o.TgZ(85,"ion-checkbox",26),o.NdJ("click",function(){return i.changeSelection("Injetados")}),o.qZA(),o.qZA(),o.TgZ(86,"ion-item"),o.TgZ(87,"ion-label"),o._uU(88,"Outro"),o.qZA(),o.TgZ(89,"ion-checkbox",27),o.NdJ("click",function(){return i.changeSelection("Outro")}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(90,"ion-item",28),o.TgZ(91,"input",29),o.NdJ("change",function(m){return i.chooseFile(m)}),o.qZA(),o.qZA(),o.TgZ(92,"div",30),o.TgZ(93,"ion-button",31),o._uU(94," Cancelar "),o._UZ(95,"ion-icon",32),o.qZA(),o.TgZ(96,"ion-button",33),o._uU(97," Confirmar "),o._UZ(98,"ion-icon",34),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&a&&(o.xp6(11),o.s9C("src",i.imageUrl,o.LSH),o.xp6(1),o.Q6J("formGroup",i.oculosForm),o.xp6(81),o.Q6J("routerLink",o.DdM(4,T)),o.xp6(3),o.Q6J("disabled",i.oculosForm.invalid||i.criando))},directives:[e.Gu,e.sr,e.wd,e.W2,e.PM,e.Zi,e.Dq,e.FN,c._Y,c.JL,c.sg,e.Ie,e.Q$,e.pK,e.j9,c.JJ,c.u,e.g2,e.q_,e.yh,e.t9,e.QI,e.n0,e.se,e.B7,e.U5,e.nz,e.w,e.YG,e.YI,u.rH,e.gu],encapsulation:2}),l})()}]}];let A=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[[Z.ez,e.Pc,c.u5,c.UX,u.Bz.forChild(f)]]}),l})(),q=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[[Z.ez,A]]}),l})()}}]);